/*
 * App_MEF.c
 *
 *  Created on: Aug 6, 2023
 *      Author: lgomez
 */

#include "stm32f4xx_hal.h"  		/* <- HAL include */
#include "stm32f4xx_nucleo_144.h" 	/* <- BSP include */

#include <assert.h>
#include "App_MEF.h"
//#include "API_Led.h"





typedef enum{
	SET_ini,
	A,
	B,
	C,
	GOOD,
	BAD
} State_MEF_t;

static State_MEF_t  estadoMEF;

void inicializarMEF(void){
	/* Initialize Estado */
	estadoMEF=SET;
	return;
};

void actualizarMEF(delaydebounce_t * delay){
		assert(&estadoMEF!=NULL);
		char * state_name;
		switch (estadoMEF){
		case SET_ini:
			if (!BSP_PB_GetState(BUTTON_USER) && delayReadD(delay)){
			    	estadoMEF=A;
				}

			break;
		case A:
			if (!BSP_PB_GetState(BUTTON_USER) && delayReadD(delay)){
				    	estadoMEF=B;
					}
			break;
		case B:
			if (!BSP_PB_GetState(BUTTON_USER) && delayReadD(delay)){
				    	estadoMEF=C;
					}
			break;
		case C:
			if (!BSP_PB_GetState(BUTTON_USER) && delayReadD(delay)){
				    	estadoMEF=A;
					}

			break;
		case GOOD:
			if (!BSP_PB_GetState(BUTTON_USER) && delayReadD(delay)){
						    	estadoMEF=SET;
							}

			break;
		case BAD:
			if (!BSP_PB_GetState(BUTTON_USER) && delayReadD(delay)){
								    	estadoMEF=SET;
									}

			break;
		default:
				/* Handle unexpected state */
			assert(0);
		}


	return;
};

char *Lee_estado(){};
